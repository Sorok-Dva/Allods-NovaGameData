<?xml version="1.0" encoding="UTF-8" ?>
<gameMechanics.world.device.UsableDeviceResource>
	<Header>
		<resourceId>139387904</resourceId>
		<isPrototype>true</isPrototype>
		<Prototype href="/Mechanics/ObjectTemplates/ShipDevice.(UsableDeviceResource).xdb#xpointer(/bunch.BunchResource)" />
		<Variables>
			<visObjNormal>/Ships/Components/ManaReactor_01/ManaReactor_01.(VisObjectTemplate).xdb#xpointer(/VisObjectTemplate)</visObjNormal>
			<collisionNormal>/Ships/Components/ManaReactor_01/ManaReactor_01.(Collision).xdb#xpointer(/Collision)</collisionNormal>
			<burstMod>0.142857</burstMod>
			<malfunctionMod>0.066667</malfunctionMod>
			<capacity>1500</capacity>
			<power>50</power>
		</Variables>
	</Header>
	<parts>
		<Item type="DeviceOfflineComponent">
			<onlineScript type="DeviceAnimationAction">
				<mode>LOOP</mode>
				<channelId>1</channelId>
				<animations>
					<Item>idle</Item>
				</animations>
			</onlineScript>
			<offlineScript type="DeviceAnimationAction">
				<mode>LOOP</mode>
				<channelId>1</channelId>
				<animations>
					<Item>idleOffline</Item>
				</animations>
			</offlineScript>
			<malfunctionScript type="DeviceAnimationAction">
				<mode>LOOP</mode>
				<channelId>1</channelId>
				<animations>
					<Item>idleMalfunction</Item>
				</animations>
			</malfunctionScript>
			<overheatScript type="DeviceAnimationAction">
				<mode>LOOP</mode>
				<channelId>1</channelId>
				<animations>
					<Item>idleMalfunction</Item>
				</animations>
			</overheatScript>
		</Item>
	</parts>
	<persistentParts>
		<Item type="gameMechanics.world.device.reactor.EnergyCapacitorPartResource">
			<maxEnergy var="capacity" />
		</Item>
		<Item type="gameMechanics.world.device.reactor.EnergyProducerPartResource">
			<power var="power" />
		</Item>
		<Item type="gameMechanics.world.device.reactor.OnlineControllerPartResource" />
		<Item type="gameMechanics.elements.bunchparts.BunchPartAttachEffects">
			<effects>
				<Item type="gameMechanics.world.device.EffectSwitchInterceptor">
					<reasonsToIgnore>
						<Item>TR_ReactorsShutdown</Item>
						<Item>TR_Silence</Item>
						<Item>TR_TeleportToIsland</Item>
						<Item>TR_InHangar</Item>
					</reasonsToIgnore>
				</Item>
				<Item type="gameMechanics.elements.effects.EntityImpactsOverTime">
					<impacts>
						<Item type="gameMechanics.elements.impacts.ImpactsIfGeneric">
							<predicate type="gameMechanics.constructor.basicElements.BinaryPredicateWrapper">
								<onMaster type="gameMechanics.constructor.basicElements.PredicateAnd">
									<predicates>
										<Item type="gameMechanics.world.device.PredicateDeviceOnline" />
										<Item type="gameMechanics.elements.predicates.PredicateGreater">
											<lhs type="gameMechanics.world.ship.elements.calcers.CalcerCurrentEnergy" />
											<rhs type="gameMechanics.world.ship.elements.calcers.CalcerMaxEnergy" />
										</Item>
									</predicates>
								</onMaster>
							</predicate>
							<impactsIf>
								<Item type="gameMechanics.elements.impacts.ProbabilisticImpactGeneric">
									<chanceCalcer type="gameMechanics.elements.calcers.LinearCalcer">
										<mul var="malfunctionMod" />
										<mulCalcer type="gameMechanics.elements.calcers.LinearCalcer">
											<mul>1</mul>
											<mulCalcer type="gameMechanics.elements.calcers.CalcerMul">
												<calcers>
													<Item type="gameMechanics.elements.calcers.InverseCalcer">
														<value type="gameMechanics.world.ship.elements.calcers.CalcerMaxEnergy" />
													</Item>
													<Item type="gameMechanics.world.ship.elements.calcers.CalcerCurrentEnergy" />
												</calcers>
											</mulCalcer>
											<sum>-1</sum>
										</mulCalcer>
										<sum>0</sum>
									</chanceCalcer>
									<impacts>
										<Item type="gameMechanics.constructor.schemes.buff.BuffAttacherGeneric">
											<buff href="/Mechanics/Ships/Reactor/Shutdown.(BuffResource).xdb#xpointer(/gameMechanics.constructor.schemes.buff.BuffResource)" />
										</Item>
										<Item type="gameMechanics.world.ship.elements.ImpactNotifyMalfunction">
											<type>CMT_ReactorShutdown</type>
										</Item>
									</impacts>
								</Item>
								<Item type="gameMechanics.elements.impacts.ProbabilisticImpactGeneric">
									<chanceCalcer type="gameMechanics.elements.calcers.LinearCalcer">
										<mul var="burstMod" />
										<mulCalcer type="gameMechanics.elements.calcers.LinearCalcer">
											<mul>1</mul>
											<mulCalcer type="gameMechanics.elements.calcers.CalcerMul">
												<calcers>
													<Item type="gameMechanics.elements.calcers.InverseCalcer">
														<value type="gameMechanics.world.ship.elements.calcers.CalcerMaxEnergy" />
													</Item>
													<Item type="gameMechanics.world.ship.elements.calcers.CalcerCurrentEnergy" />
												</calcers>
											</mulCalcer>
											<sum>-1</sum>
										</mulCalcer>
										<sum>0</sum>
									</chanceCalcer>
									<impacts>
										<Item type="gameMechanics.elements.impacts.ImpactStartSpellGeneric">
											<spell href="/Mechanics/Ships/Reactor/ManaBurst.(SpellCasterSelf).xdb#xpointer(/gameMechanics.constructor.schemes.spell.casterSelf.SpellCasterSelf)" />
										</Item>
										<Item type="gameMechanics.world.ship.elements.ImpactNotifyMalfunction">
											<type>CMT_ManaBurst</type>
										</Item>
									</impacts>
								</Item>
							</impactsIf>
						</Item>
					</impacts>
					<tick>1000</tick>
					<initialDelay>-1</initialDelay>
				</Item>
				<Item type="gameMechanics.world.device.parts.ImpactsOnUserGeneric">
					<userImpactsOnStartUse>
						<Item type="gameMechanics.elements.impacts.ImpactIncreaseQuestCount">
							<id href="/World/Quests/AstralHangar/Q1/Count_1.(QuestCountId).xdb#xpointer(/gameMechanics.elements.quest.QuestCountId)" />
						</Item>
					</userImpactsOnStartUse>
				</Item>
			</effects>
		</Item>
	</persistentParts>
	<visObj hrefvar="visObjNormal" />
	<collision hrefvar="collisionNormal" />
	<collisionObject>true</collisionObject>
	<title href="Reactor_Tutorial_Title.txt" />
	<exploitingText href="/Mechanics/Ships/Reactor/ExploitText.txt" />
	<exploit href="/Mechanics/Ships/Reactor/Exploit.xdb#xpointer(/gameMechanics.constructor.schemes.exploit.Exploit)" />
	<manaBurstSpell href="/Mechanics/Ships/Reactor/ManaBurst.(SpellCasterSelf).xdb#xpointer(/gameMechanics.constructor.schemes.spell.casterSelf.SpellCasterSelf)" />
	<mass>10</mass>
	<deviceSpells>
		<Item href="/Mechanics/Ships/Reactor/ForceShutdown.(SpellCasterSelf).xdb#xpointer(/gameMechanics.constructor.schemes.spell.casterSelf.SpellCasterSelf)" />
	</deviceSpells>
</gameMechanics.world.device.UsableDeviceResource>
