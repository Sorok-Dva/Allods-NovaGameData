<?xml version="1.0" encoding="UTF-8" ?>
<gameMechanics.constructor.schemes.exploit.Exploit>
	<Header>
		<resourceId>25588</resourceId>
		<Prototype href="/Items/InteractiveObjects/Templates/Exploit.xdb#xpointer(/gameMechanics.constructor.schemes.exploit.Exploit)" />
	</Header>
	<contextActionInfo>
		<contextName href="" />
		<contextDescription href="" />
		<contextImage href="" />
	</contextActionInfo>
	<casterConditions>
		<Item type="gameMechanics.constructor.basicElements.PredicateOr">
			<predicates>
				<Item type="gameMechanics.constructor.basicElements.PredicateAnd">
					<predicates>
						<Item type="gameMechanics.elements.predicates.PredicateHasItemsCount">
							<items>
								<Item href="/Items/QuestItems/ArchipelagoLeague3/LightDrainer/LightDrainer.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
							</items>
							<totalCount>1</totalCount>
						</Item>
						<Item type="gameMechanics.elements.predicates.PredicateQuestCounterNotLess">
							<quest href="/World/Quests/ArchipelagoLeague3/Quest_20_20/Quest_20_20.xdb#xpointer(/gameMechanics.constructor.schemes.quest.QuestResource)" />
							<counterResource href="/World/Quests/ArchipelagoLeague3/Quest_20_20/CountId_1.xdb#xpointer(/gameMechanics.elements.quest.QuestCountId)" />
							<value>10</value>
						</Item>
					</predicates>
				</Item>
				<Item type="gameMechanics.elements.predicates.PredicateHasItemsCount">
					<items>
						<Item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
					</items>
					<totalCount>1</totalCount>
				</Item>
			</predicates>
		</Item>
		<Item type="gameMechanics.elements.predicates.PredicateItemsCountGreater">
			<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
			<value>0</value>
		</Item>
	</casterConditions>
	<targetConditions />
	<casterImpacts>
		<Item type="gameMechanics.elements.impacts.ImpactIfCaster">
			<predicates>
				<Item type="gameMechanics.elements.predicates.PredicateQuestStatus">
					<quest href="/World/Quests/ArchipelagoLeague3/Quest_10_10/Quest_10_10.xdb#xpointer(/gameMechanics.constructor.schemes.quest.QuestResource)" />
					<status>Started</status>
				</Item>
			</predicates>
			<impacts>
				<Item type="gameMechanics.elements.impacts.ImpactIncreaseQuestCount">
					<id href="/World/Quests/ArchipelagoLeague3/Quest_10_10/LanternCount.(QuestCountId).xdb#xpointer(/gameMechanics.elements.quest.QuestCountId)" />
				</Item>
			</impacts>
		</Item>
		<Item type="gameMechanics.elements.impacts.ImpactScriptZoneSetDisabled">
			<zone href="/Maps/Kania_AL3/ScriptZones/ArchipelagoLeague3/LightAreaVillage4.xdb#xpointer(/gameMechanics.map.scriptZone.ScriptZone)" />
			<disable>false</disable>
		</Item>
		<Item type="gameMechanics.elements.impacts.ImpactsDeferred">
			<delay>130000</delay>
			<impacts>
				<Item type="gameMechanics.elements.impacts.ImpactScriptZoneSetDisabled">
					<zone href="/Maps/Kania_AL3/ScriptZones/ArchipelagoLeague3/LightAreaVillage4.xdb#xpointer(/gameMechanics.map.scriptZone.ScriptZone)" />
				</Item>
			</impacts>
		</Item>
		<Item type="gameMechanics.elements.impacts.ImpactIfCaster">
			<predicates>
				<Item type="gameMechanics.elements.predicates.PredicateQuestStatus">
					<quest href="/World/Quests/ArchipelagoLeague3/Quest_20_20/Quest_20_20.xdb#xpointer(/gameMechanics.constructor.schemes.quest.QuestResource)" />
					<status>Started</status>
				</Item>
				<Item type="gameMechanics.elements.predicates.PredicateQuestCounterNotLess">
					<quest href="/World/Quests/ArchipelagoLeague3/Quest_20_20/Quest_20_20.xdb#xpointer(/gameMechanics.constructor.schemes.quest.QuestResource)" />
					<counterResource href="/World/Quests/ArchipelagoLeague3/Quest_20_20/CountId_1.xdb#xpointer(/gameMechanics.elements.quest.QuestCountId)" />
					<value>10</value>
				</Item>
			</predicates>
			<impacts>
				<Item type="gameMechanics.elements.impacts.ImpactIncreaseQuestCount">
					<id href="/World/Quests/ArchipelagoLeague3/Quest_20_20/LampLit.(QuestCountId).xdb#xpointer(/gameMechanics.elements.quest.QuestCountId)" />
				</Item>
			</impacts>
		</Item>
		<Item type="gameMechanics.constructor.schemes.buff.StackBuff">
			<buff href="/Maps/Kania_AL3/ScriptZones/ArchipelagoLeague3/ZoneDebuff.(BuffResource).xdb#xpointer(/gameMechanics.constructor.schemes.buff.BuffResource)" />
			<delta type="gameMechanics.elements.calcers.FloatData">
				<value>-1</value>
			</delta>
		</Item>
		<Item type="gameMechanics.elements.impacts.ImpactIfCaster">
			<predicates>
				<Item type="gameMechanics.elements.predicates.PredicateQuestStatus">
					<quest href="/World/Quests/ArchipelagoLeague3/Quest_20_20/Quest_20_20.xdb#xpointer(/gameMechanics.constructor.schemes.quest.QuestResource)" />
					<status>Active</status>
				</Item>
			</predicates>
			<impacts>
				<Item type="gameMechanics.elements.impacts.ImpactSummon">
					<destination type="gameMechanics.map.destination.RelativePos">
						<yaw type="constructor.basicElements.AngleRadians" />
						<coord x="4" y="5" z="1" />
					</destination>
					<impacts>
						<Item type="gameMechanics.elements.impacts.ImpactComeToMe" />
						<Item type="gameMechanics.elements.impacts.ImpactActivateAggro">
							<value>100</value>
						</Item>
						<Item type="gameMechanics.elements.impacts.ImpactsDeferred">
							<delay>180000</delay>
							<impacts>
								<Item type="gameMechanics.elements.impacts.ImpactKill" />
							</impacts>
						</Item>
					</impacts>
					<object href="/Creatures/Bat/Instances/ArchipelagoLeague3/BatA_16_17.(MobWorld).xdb#xpointer(/gameMechanics.world.mob.MobWorld)" />
				</Item>
			</impacts>
		</Item>
		<Item type="gameMechanics.elements.impacts.ImpactIfTarget">
			<predicates>
				<Item type="gameMechanics.constructor.basicElements.PredicateNot">
					<predicate type="gameMechanics.elements.predicates.PredicateItemsCountGreater">
						<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
						<value>1</value>
					</predicate>
				</Item>
			</predicates>
			<impactsIf>
				<Item type="gameMechanics.elements.impacts.ImpactIncrementItemsCount">
					<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
					<summand>-1</summand>
				</Item>
				<Item type="gameMechanics.elements.impacts.ImpactDestroyItem">
					<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
				</Item>
				<Item type="gameMechanics.elements.impacts.ImpactGiveItem">
					<item type="gameMechanics.constructor.schemes.item.SimpleItemProvider">
						<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBattery.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
					</item>
				</Item>
			</impactsIf>
			<impactsElse>
				<Item type="gameMechanics.elements.impacts.ImpactIncrementItemsCount">
					<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
					<summand>-1</summand>
				</Item>
			</impactsElse>
		</Item>
	</casterImpacts>
	<targetImpacts>
		<Item type="gameMechanics.elements.device.DeviceDie" />
		<Item type="gameMechanics.elements.device.ImpactDeviceSetVisualState">
			<visualState>1</visualState>
		</Item>
		<Item type="gameMechanics.elements.device.ImpactDeviceClientData">
			<data href="MegaLight.(ClientData).xdb#xpointer(/gameMechanics.world.ClientData)" />
		</Item>
	</targetImpacts>
	<modifiersTarget />
	<prepareDuration>3000</prepareDuration>
	<range>5</range>
	<isQuestOnly>false</isQuestOnly>
	<needsLos>true</needsLos>
</gameMechanics.constructor.schemes.exploit.Exploit>
