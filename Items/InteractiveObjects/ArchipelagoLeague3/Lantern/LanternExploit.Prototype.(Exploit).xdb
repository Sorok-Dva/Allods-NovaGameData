<?xml version="1.0" encoding="UTF-8" ?>
<gameMechanics.constructor.schemes.exploit.Exploit>
	<Header>
		<resourceId>113340432</resourceId>
		<isPrototype>true</isPrototype>
		<Prototype href="/Items/InteractiveObjects/Templates/Exploit.xdb#xpointer(/gameMechanics.constructor.schemes.exploit.Exploit)" />
	</Header>
	<casterConditions>
		<Item type="gameMechanics.elements.predicates.PredicateHasItemsCount">
			<items>
				<Item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
			</items>
			<totalCount>1</totalCount>
		</Item>
		<Item type="gameMechanics.constructor.basicElements.PredicateNot">
			<predicate type="gameMechanics.elements.predicates.PredicateQuestStatus">
				<quest href="/World/Quests/ArchipelagoLeague3/Quest_10_10/Quest_10_10.xdb#xpointer(/gameMechanics.constructor.schemes.quest.QuestResource)" />
				<status>Started</status>
			</predicate>
		</Item>
		<Item type="gameMechanics.elements.predicates.PredicateItemsCountGreater">
			<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
			<value>0</value>
		</Item>
	</casterConditions>
	<casterImpacts>
		<Item type="gameMechanics.elements.impacts.ImpactsDeferred">
			<delay>0</delay>
			<impacts>
				<Item type="gameMechanics.elements.impacts.ImpactSummon">
					<destination type="gameMechanics.elements.calcers.DestinationBehind">
						<comfortRange>5</comfortRange>
						<maxSteps>10</maxSteps>
					</destination>
					<impacts>
						<Item type="gameMechanics.elements.impacts.ImpactComeToMe" />
						<Item type="gameMechanics.elements.impacts.ImpactActivateAggro">
							<value>100</value>
						</Item>
						<Item type="gameMechanics.elements.impacts.ImpactsDeferred">
							<delay>180000</delay>
							<impacts>
								<Item type="gameMechanics.elements.impacts.ImpactKill" />
							</impacts>
						</Item>
					</impacts>
					<object href="/Creatures/Bat/Instances/ArchipelagoLeague3/BatA_16_17.(MobWorld).xdb#xpointer(/gameMechanics.world.mob.MobWorld)" />
				</Item>
				<Item type="gameMechanics.elements.impacts.ImpactIfTarget">
					<predicates>
						<Item type="gameMechanics.constructor.basicElements.PredicateNot">
							<predicate type="gameMechanics.elements.predicates.PredicateItemsCountGreater">
								<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
								<value>1</value>
							</predicate>
						</Item>
					</predicates>
					<impactsIf>
						<Item type="gameMechanics.elements.impacts.ImpactIncrementItemsCount">
							<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
							<summand>-1</summand>
						</Item>
						<Item type="gameMechanics.elements.impacts.ImpactDestroyItem">
							<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
						</Item>
						<Item type="gameMechanics.elements.impacts.ImpactGiveItem">
							<item type="gameMechanics.constructor.schemes.item.SimpleItemProvider">
								<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBattery.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
							</item>
						</Item>
					</impactsIf>
					<impactsElse>
						<Item type="gameMechanics.elements.impacts.ImpactIncrementItemsCount">
							<item href="/Items/QuestItems/ArchipelagoLeague3/AstralBattery/AstralBatteryCharged.(ItemResource).xdb#xpointer(/gameMechanics.constructor.schemes.item.ItemResource)" />
							<summand>-1</summand>
						</Item>
					</impactsElse>
				</Item>
			</impacts>
		</Item>
		<Item type="gameMechanics.elements.impacts.ImpactScriptZoneSetDisabled">
			<zone hrefvar="zone" />
			<disable>false</disable>
		</Item>
		<Item type="gameMechanics.elements.impacts.ImpactsDeferred">
			<delay>120000</delay>
			<limit>1</limit>
			<impacts>
				<Item type="gameMechanics.elements.impacts.ImpactScriptZoneSetDisabled">
					<zone hrefvar="zone" />
					<disable>true</disable>
				</Item>
			</impacts>
			<useSpellEnvelopeTargetEffects>false</useSpellEnvelopeTargetEffects>
		</Item>
		<Item type="gameMechanics.constructor.schemes.buff.StackBuff">
			<buff href="/Maps/Kania_AL3/ScriptZones/ArchipelagoLeague3/ZoneDebuff.(BuffResource).xdb#xpointer(/gameMechanics.constructor.schemes.buff.BuffResource)" />
			<delta type="gameMechanics.elements.calcers.FloatData">
				<value>-1</value>
			</delta>
			<attachIfNotExist>false</attachIfNotExist>
		</Item>
	</casterImpacts>
	<targetImpacts>
		<Item type="gameMechanics.elements.device.DeviceDie" />
		<Item type="gameMechanics.elements.device.ImpactDeviceSetVisualState">
			<visualState>1</visualState>
		</Item>
		<Item type="gameMechanics.elements.device.ImpactDeviceClientData">
			<data href="MegaLight.(ClientData).xdb#xpointer(/gameMechanics.world.ClientData)" />
		</Item>
	</targetImpacts>
	<prepareDuration>3000</prepareDuration>
	<isQuestOnly>false</isQuestOnly>
</gameMechanics.constructor.schemes.exploit.Exploit>
